<!DOCTYPE html>

<html>
  <head>
    <%- include('partials/head.ejs') %>
  </head>

  <body>
    <header>    
      <%- include('partials/navbar.ejs') %>
    </header>

    <main style="margin-top: 50px;">
      <div class="container">
      <%- include('partials/alerts.ejs') %>

      <!-- STATS -->
      <div class="row mb-3">
        <div class="col-xs-12 col-lg-3 d-flex align-items-stretch">
          <div class="card w-100">
            <div class="card-body">
              <div class="row">
                <div class="col">
                  <h5 class="card-title text-uppercase text-muted mb-0">Regions</h5>
                  <span class="h2 font-weight-bold mb-0"><%= data.totalRegions %></span>
                </div>
                <div class="col-auto">
                  <div class="text-dark">
                    <i class="fa fa-globe fa-2x"></i>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <div class="col-xs-12 col-lg-3 d-flex align-items-stretch">
          <div class="card w-100">
            <div class="card-body">
              <div class="row">
                <div class="col">
                  <h5 class="card-title text-uppercase text-muted mb-0">Dates</h5>
                  <span class="h2 font-weight-bold mb-0"><%= data.totalDates %></span>
                </div>
                <div class="col-auto">
                  <div class="text-dark">
                    <i class="fa fa-clock-o fa-2x"></i>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <div class="col-xs-12 col-lg-3 d-flex align-items-stretch">
          <div class="card w-100">
            <div class="card-body">
              <div class="row">
                <div class="col">
                  <h5 class="card-title text-uppercase text-muted mb-0">Weather</h5>
                  <span class="h2 font-weight-bold mb-0"><%= data.totalWeather %></span>
                </div>
                <div class="col-auto">
                  <div class="text-dark">
                    <i class="fa fa-thermometer-full fa-2x"></i>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <div class="col-xs-12 col-lg-3 d-flex align-items-stretch">
          <div class="card w-100">
            <div class="card-body">
              <div class="row">
                <div class="col">
                  <h5 class="card-title text-uppercase text-muted mb-0">Users</h5>
                  <span class="h2 font-weight-bold mb-0"><%= data.totalUsers %></span>
                </div>
                <div class="col-auto">
                  <div class="text-dark">
                    <i class="fa fa-users fa-2x"></i>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div class="row">
        <div class="col-xs-12 col-lg-4 d-flex align-items-stretch">
          <div class="card w-100">
            <div class="card-header">GeoJSON</div>
            <div class="card-body d-grid gap-2">
              <!-- Form to import and submit geoJSON -->
              <form action="/admin/region/save" method="post" enctype="multipart/form-data">
                <label for="geojsonImportButton">Upload geoJSON file:</label>
                <br />
                <!--* Button to select the geoJSON to send to the server -->
                <!-- Only accept files with the .geojson extension -->
                <input
                  type="file"
                  id="geojsonImportButton"
                  name="geojson"
                  accept=".geojson"
                />

                <!--* Button to send the geoJSON to the server -->
                <div class="d-grid mt-1"> 
                  <button class="btn btn-primary">Send</button> 
                </div>
              </form>
            </div>
          </div>
        </div>


        <div class="col-xs-12 col-lg-4 d-flex align-items-stretch">
          <div class="card card-primary w-100">
            <div class="card-header">
              <i class="fa fa-database text-dark" aria-hidden="true"></i> Database
            </div>
            <div class="card-body d-grid gap-2 text-center">
                <!-- Form to clear the region borders collection -->
                <form action="/admin/region/deleteAll" method="post">
                  <div class="d-grid">
                    <button class="btn btn-primary">Delete regions</button>
                  </div>
                </form>

                <!-- Form to clear the weather dates collection -->
                <form  action="/admin/date/deleteAll" method="post">
                  <div class="d-grid">
                    <button class="btn btn-primary">Delete dates</button>
                  </div>
                </form>

                <!-- Form to clear the weather collection -->
                <form action="/admin/weather/deleteAll" method="post">
                  <div class="d-grid">
                    <button class="btn btn-primary">Delete weather data</button>
                  </div>
                </form>
            </div>
          </div>
        </div>


        <div class="col-xs-12 col-lg-4 d-flex align-items-stretch">
          <div class="card w-100">
            <div class="card-header">Other</div>
            <div class="card-body d-grid gap-2">
              <!-- Form to calculate the centers of the features saved in the regionBorders collection -->
              <form action="/admin/region/calculateCenters" method="post">
                <div class="d-grid">
                  <button class="btn btn-primary">Calculate center of regions</button>
                </div>
              </form>

              <!-- Form to save the weather information of each feature in the region borders collection -->
              <!-- <form action="/saveWeather" method="post">
                <div class="d-grid">
                  <button class="btn btn-primary">Save weather of regions in the database</button>
                </div>
              </form> -->
            </div>
          </div>
        </div>


      </div>


      </div>
    </main>

    <footer>
      <%- include('partials/footer.ejs') %>
    </footer>
  </body>
  <%- include('partials/scripts.ejs') %>
</html>
